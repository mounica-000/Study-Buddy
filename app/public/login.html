<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Study Buddy | Login</title>
</head>

<body>
  <div class="page">
    <nav class="nav">
      <div class="nav-menu">
        <ul>
          <li><a href="#" class="link active">Home</a></li>
          <li><a href="signup.html" class="link">Sign Up</a></li>
        </ul>
      </div>
    </nav>
    <div class="form">
      <div class="login-container" id="login">
        <div class="heading">
          <span>New User? <a href="signup.html">Sign Up</a></span>
          <header>Login</header>
        </div>
        <div class="login-form">
          <div class="input-box">
            <!-- TODO: change this to accept username or Email -->
            <input id="username" type="text" class="input-field" placeholder="Username">
            <i class="bx bx-user"></i>
          </div>
        </div>
        <div class="input-box">
          <input id="password" type="password" class="input-field" placeholder="Password">
          <i class="bx bx-lock-alt"></i>
        </div>
        <div class="input-box">
          <button id="submit" class="submit">Login</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let usernameInput = document.getElementById("username");
    let passwordInput = document.getElementById("password");
    let button = document.getElementById("submit");

    button.addEventListener("click", () => {
      let currentDate = new Date();
      let timestampValue = currentDate.toISOString();
      let dateAndTime = timestampValue.split('T');
      let timeVal = dateAndTime[1].split('.');
      let lastLoginValue = dateAndTime[0] + " " + timeVal[0];

      let usernameValue = usernameInput.value;
      let passwordValue = passwordInput.value;

      fetch("/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          username: usernameValue,
          password: passwordValue,
          last_login: lastLoginValue
        })
      });
    });
  </script>


</body>

</html>