<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Study Buddy | Sign Up</title>
</head>

<body>
  <div class="page">
    <nav class="nav">
      <div class="nav-menu">
        <ul>
          <li><a href="#" class="link active">Home</a></li>
          <li><a href="login.html" class="link">Login</a></li>
        </ul>
      </div>
    </nav>
    <div class="form">
      <div class="signup-container" id="signup">
        <div class="heading">
          <span>Have an account? <a href="login.html">Login</a></span>
          <header>Sign Up</header>
        </div>
        <div class="register-form">
          <div class="input-box">
            <input id="username" type="text" class="input-field" placeholder="Username">
            <i class="bx bx-user"></i>
          </div>
        </div>
        <div class="input-box">
          <input id="email" type="text" class="input-field" placeholder="Email">
          <i class="bx bx-envelope"></i>
        </div>
        <div class="input-box">
          <input id="password" type="password" class="input-field" placeholder="Password">
          <i class="bx bx-lock-alt"></i>
        </div>
        <div class="input-box">
          <button id="submit" class="submit">Register</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let usernameInput = document.getElementById("username");
    let emailInput = document.getElementById("email");
    let passwordInput = document.getElementById("password");
    let button = document.getElementById("submit");

    button.addEventListener("click", () => {
      let currentDate = new Date();
      let timestampValue = currentDate.toISOString();
      let dateAndTime = timestampValue.split('T');
      let timeVal = dateAndTime[1].split('.');
      let finalTimestampValue = dateAndTime[0] + " " + timeVal[0];
      //console.log(finalTimestampValue);
      let usernameValue = usernameInput.value;
      let emailValue = emailInput.value;
      let passwordValue = passwordInput.value;
      //console.log(username, email, password);
      fetch("/register", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          username: usernameValue,
          email: emailValue,
          password: passwordValue,
          timestamp: finalTimestampValue
        })
      });
    });
  </script>


</body>

</html>